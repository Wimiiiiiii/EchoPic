{% extends "base.html" %}

{% block title %}Accueil - Recherche d'Images{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12 text-center mb-4">
        <h1>Moteur de Recherche d'Images</h1>
        <p class="lead">Recherchez des images similaires en utilisant différents modèles d'indexation</p>
    </div>
</div>

{% if current_user.is_authenticated %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-body">
                <form id="searchForm" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="image" class="form-label">Sélectionnez une image</label>
                        <input type="file" class="form-control" id="image" name="image" accept="image/*" required>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">Modèles d'indexation</label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="models" value="mobilenet" id="mobilenet">
                            <label class="form-check-label" for="mobilenet">MobileNet</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="models" value="resnet50" id="resnet50">
                            <label class="form-check-label" for="resnet50">ResNet50</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" name="models" value="vit" id="vit">
                            <label class="form-check-label" for="vit">ViT</label>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="similarity" class="form-label">Méthode de similarité</label>
                        <select class="form-select" id="similarity" name="similarity">
                            <option value="euclidean">Euclidienne</option>
                            <option value="correlation">Corrélation</option>
                            <option value="chi-square">Chi-square</option>
                            <option value="bhattacharyya">Bhattacharyya</option>
                        </select>
                    </div>

                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary">Rechercher</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-12">
        <div id="results" class="d-none">
            <h3>Résultats de la recherche</h3>
            <div class="row" id="resultImages"></div>
            <div class="row mt-4">
                <div class="col-md-6">
                    <canvas id="precisionRecallChart"></canvas>
                </div>
                <div class="col-md-6">
                    <h4>Métriques</h4>
                    <ul id="metrics" class="list-group"></ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% else %}
<div class="alert alert-info">
    Veuillez vous connecter pour utiliser le moteur de recherche.
</div>
{% endif %}
{% endblock %} 